{"version":3,"file":"shared.cjs","sources":["../node_modules/.pnpm/tiny-invariant@1.3.3/node_modules/tiny-invariant/dist/esm/tiny-invariant.js","../src/helpers/projectOnEllipsoidSurface.ts","../src/Ellipsoid.ts","../src/EllipsoidGeometry.ts","../src/Geodetic.ts"],"sourcesContent":null,"names":["isProduction","prefix","invariant","condition","message","value","vectorScratch","Vector3","projectOnEllipsoidSurface","position","reciprocalRadiiSquared","result","options","x","y","z","rx","ry","rz","x2","y2","z2","normSquared","ratio","intersection","gradient","lambda","correction","sx","sy","sz","error","sx2","sy2","sz2","sx3","sy3","sz3","vectorScratch1","vectorScratch2","vectorScratch3","_Ellipsoid","east","north","up","Matrix4","ray","reciprocalRadii","p","d","p2","d2","pd","discriminant","Q","t1","t2","t","surfacePosition","radius","a2","b2","normal","direction","v","q","Ellipsoid","EllipsoidGeometry","BufferGeometry","radii","longitudeSegments","latitudeSegments","elementCount","vertex","vertices","normals","uvs","grid","indices","vertexIndex","uvIndex","rowIndex","rowIndices","phi","uOffset","u","theta","a","b","c","BufferAttribute","source","_Geodetic","longitude","latitude","height","other","projection","ellipsoid","radiiSquared","cosLatitude","array","offset","Geodetic"],"mappings":"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","x_google_ignoreList":[0]}